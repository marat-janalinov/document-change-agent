# üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Bind Mounts - –û—Ç—á–µ—Ç

**–î–∞—Ç–∞:** 2025-11-24  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –Ω–∞ —Ö–æ—Å—Ç–µ

```bash
mkdir -p ./data/{uploads,outputs,backups,logs,prompts}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–Ω—ã.

### 2. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Docker Volumes

–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ named volumes –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ —Ö–æ—Å—Ç–µ:

- ‚úÖ `data-uploads` ‚Üí `./data/uploads/`
- ‚úÖ `data-outputs` ‚Üí `./data/outputs/`
- ‚úÖ `data-backups` ‚Üí `./data/backups/`
- ‚úÖ `data-logs` ‚Üí `./data/logs/`
- ‚úÖ `data-prompts` ‚Üí `./data/prompts/`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã.

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `docker-compose.yml`

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–µ—Ä–≤–∏—Å–µ `mcp-server`:

**–ë—ã–ª–æ:**
```yaml
volumes:
  - data-uploads:/data/uploads
  - data-outputs:/data/outputs
  - data-backups:/data/backups
```

**–°—Ç–∞–ª–æ:**
```yaml
volumes:
  - ./data/uploads:/data/uploads
  - ./data/outputs:/data/outputs
  - ./data/backups:/data/backups
```

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–µ—Ä–≤–∏—Å–µ `backend`:

**–ë—ã–ª–æ:**
```yaml
volumes:
  - data-uploads:/data/uploads
  - data-outputs:/data/outputs
  - data-backups:/data/backups
  - data-logs:/data/logs
  - data-prompts:/data/prompts
```

**–°—Ç–∞–ª–æ:**
```yaml
volumes:
  - ./data/uploads:/data/uploads
  - ./data/outputs:/data/outputs
  - ./data/backups:/data/backups
  - ./data/logs:/data/logs
  - ./data/prompts:/data/prompts
```

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–∏ `volumes`:

–£–¥–∞–ª–µ–Ω—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è named volumes (–∫—Ä–æ–º–µ `postgres-data`), —Ç–∞–∫ –∫–∞–∫ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è bind mounts.

**–ë—ã–ª–æ:**
```yaml
volumes:
  postgres-data:
    driver: local
  data-uploads:
    driver: local
  data-outputs:
    driver: local
  data-backups:
    driver: local
  data-logs:
    driver: local
  data-prompts:
    driver: local
```

**–°—Ç–∞–ª–æ:**
```yaml
volumes:
  # –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è PostgreSQL (–æ—Å—Ç–∞–≤–ª—è–µ–º named volume –¥–ª—è –ë–î)
  postgres-data:
    driver: local
  # –û—Å—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ bind mounts (./data/*)
```

#### –£–¥–∞–ª–µ–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞:

–£–¥–∞–ª–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∞—Ç—Ä–∏–±—É—Ç `version: '3.8'` –∏–∑ –Ω–∞—á–∞–ª–∞ —Ñ–∞–π–ª–∞.

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ö–æ–¥ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π.

–ü—É—Ç–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ—Å—Ç–∞–ª–∏—Å—å —Ç–µ–º–∏ –∂–µ (`/data/uploads`, `/data/outputs`, –∏ —Ç.–¥.), –ø–æ—ç—Ç–æ–º—É –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ `DATA_DIR`, `UPLOADS_DIR`, –∏ –¥—Ä—É–≥–∏–µ –ø—É—Ç–∏, —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### 5. –ó–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ.

- ‚úÖ PostgreSQL: Healthy
- ‚úÖ Backend: Running
- ‚úÖ MCP Server: Running
- ‚úÖ React Frontend: Running
- ‚úÖ Legacy Frontend: Running

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º:**
- ‚úÖ –§–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: `/data/uploads/admin1/`
- ‚úÖ –§–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ —Ö–æ—Å—Ç–µ: `./data/uploads/admin1/`
- ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ù–∞ —Ö–æ—Å—Ç–µ:

```
./data/
‚îú‚îÄ‚îÄ uploads/
‚îÇ   ‚îú‚îÄ‚îÄ admin1/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ source/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ changes/
‚îÇ   ‚îú‚îÄ‚îÄ admin2/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ source/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ changes/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ outputs/
‚îú‚îÄ‚îÄ backups/
‚îú‚îÄ‚îÄ logs/
‚îî‚îÄ‚îÄ prompts/
```

### –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (–ø—É—Ç–∏ –æ—Å—Ç–∞–ª–∏—Å—å —Ç–µ –∂–µ):

```
/data/
‚îú‚îÄ‚îÄ uploads/
‚îÇ   ‚îú‚îÄ‚îÄ admin1/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ source/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ changes/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ outputs/
‚îú‚îÄ‚îÄ backups/
‚îú‚îÄ‚îÄ logs/
‚îî‚îÄ‚îÄ prompts/
```

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

1. **–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø —Å —Ö–æ—Å—Ç–∞** - –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å `./data/uploads/` –≤ —Ñ–∞–π–ª–æ–≤–æ–º –º–µ–Ω–µ–¥–∂–µ—Ä–µ
2. **–ü—Ä–æ—Å—Ç–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** - –æ–±—ã—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã `tar`, `rsync`
3. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø** - –Ω–µ –Ω—É–∂–Ω—ã Docker –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∞–π–ª–æ–≤
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —Å–ª—É–∂–±–∞–º–∏** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å cron, systemd –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Linux (`du`, `find`, `inotifywait`)

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º:

```bash
# –ù–∞ —Ö–æ—Å—Ç–µ
ls -la ./data/uploads/admin1/

# –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker compose exec backend ls -la /data/uploads/admin1/
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–∞–∫ –Ω–∞ —Ö–æ—Å—Ç–µ, —Ç–∞–∫ –∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
# –ü—Ä–æ—Å—Ç–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
tar -czf backup-$(date +%Y%m%d).tar.gz ./data/uploads/
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–§–∞–π–ª—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ `root:root`. –ï—Å–ª–∏ –Ω—É–∂–Ω—ã –¥—Ä—É–≥–∏–µ –ø—Ä–∞–≤–∞:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
sudo chown -R $(id -u):$(id -g) ./data/
chmod -R 755 ./data/
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ–ø–µ—Ä—å —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–ª–æ –ø—Ä–æ—â–µ:

```bash
#!/bin/bash
# backup.sh
BACKUP_DIR="/backup/document-agent"
DATE=$(date +%Y%m%d_%H%M%S)

mkdir -p "$BACKUP_DIR"
tar -czf "$BACKUP_DIR/data-$DATE.tar.gz" ./data/
```

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ cron –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.

### –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö volumes (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ named volumes:

```bash
# ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã!
docker volume rm document-change-agent_data-uploads
docker volume rm document-change-agent_data-outputs
docker volume rm document-change-agent_data-backups
docker volume rm document-change-agent_data-logs
docker volume rm document-change-agent_data-prompts
```

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. ‚úÖ `docker-compose.yml` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã volumes –Ω–∞ bind mounts
2. ‚úÖ `./data/` - —Å–æ–∑–¥–∞–Ω—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–∞ —Ö–æ—Å—Ç–µ
3. ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ volumes

**–ö–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞:** ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–ø—É—Ç–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ—Å—Ç–∞–ª–∏—Å—å —Ç–µ –∂–µ)

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –§–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –Ω–∞ —Ö–æ—Å—Ç–µ, –∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- ‚úÖ –ö–æ–¥ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å bind mounts!**

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-11-24

