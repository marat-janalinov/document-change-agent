# Миграция функционала в React

Функционал Document Change Agent успешно перенесен в React проект.

## Структура компонентов

### Основные компоненты

1. **`pages/DocumentChangeAgent.tsx`** - Главная страница с вкладками
   - Вкладка "Применение изменений" (3 шага)
   - Вкладка "Проверка инструкций"

2. **`components/document-change/`**
   - `FileUpload.tsx` - Компонент загрузки файлов с drag & drop
   - `ProcessingStep.tsx` - Компонент отображения процесса обработки
   - `ResultsStep.tsx` - Компонент отображения результатов
   - `InstructionCheck.tsx` - Компонент проверки инструкций

3. **`hooks/useDocumentChange.ts`** - Хук для управления состоянием
   - Управление файлами
   - WebSocket подключение
   - Polling статуса
   - Обработка изменений

4. **`lib/api.ts`** - API клиент
   - Все методы для взаимодействия с backend
   - WebSocket URL генерация

## Использование

### Запуск в режиме разработки

```bash
cd react
npm install
npm run dev
```

Приложение будет доступно на `http://localhost:8080`

### Настройка API URL

По умолчанию в режиме разработки используется `http://localhost:8000` для API.

Для продакшена можно установить переменную окружения:
```bash
VITE_API_URL=http://your-backend-url npm run build
```

### Интеграция с существующим backend

React приложение использует те же API endpoints, что и старый frontend:
- `/api/upload-file` - загрузка файлов
- `/api/files` - список файлов
- `/api/generate-test-files` - генерация тестовых файлов
- `/api/process-documents` - запуск обработки
- `/api/session/{id}/status` - статус сессии
- `/api/check-instructions` - проверка инструкций
- `/api/download/{filename}` - скачивание файлов
- `/ws/{sessionId}` - WebSocket для real-time обновлений

## Особенности реализации

1. **WebSocket** - Автоматическое подключение при запуске обработки
2. **Polling** - Резервный механизм проверки статуса каждые 2 секунды
3. **Toast уведомления** - Используется shadcn/ui toast для уведомлений
4. **Drag & Drop** - Поддержка перетаскивания файлов
5. **Responsive дизайн** - Адаптивная верстка для мобильных устройств

## Стилизация

Используется существующая дизайн-система проекта:
- Tailwind CSS
- shadcn/ui компоненты
- Корпоративные цвета (industrial-teal, industrial-orange, industrial-blue)

## Следующие шаги

1. Настроить проксирование API запросов через nginx (если нужно)
2. Добавить обработку ошибок сети
3. Оптимизировать производительность для больших файлов
4. Добавить тесты компонентов

