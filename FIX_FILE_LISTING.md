# Исправление отображения файлов из поддиректорий

## Проблема
Файлы в персональных директориях пользователей находятся в поддиректориях `source` и `changes`, но не отображаются в разделах "Применение инструкций" и "Проверка изменений".

## Выполненные исправления

### 1. Улучшена функция `list_files` в `backend/app.py`
- Добавлено автоматическое создание поддиректорий `source` и `changes`, если они не существуют
- Добавлено детальное логирование для отладки
- Исправлена обработка query параметра `file_type` с использованием `Query()`
- Добавлена проверка, что файл является файлом (не директорией)

### 2. Улучшена инициализация при старте
- При старте приложения автоматически создаются поддиректории `source` и `changes` для всех пользователей

### 3. Исправлен порядок параметров в endpoint
- `file_type` теперь явно объявлен как `Query` параметр
- Это гарантирует правильную обработку query параметра из URL

## Проверка работы

1. Перезапустите backend:
   ```bash
   docker compose restart backend
   ```

2. Проверьте логи:
   ```bash
   docker compose logs -f backend | grep "список файлов"
   ```

3. Проверьте, что файлы отображаются:
   - В разделе "Применение инструкций" должны быть файлы из папки `source`
   - В разделе "Проверка изменений" должны быть файлы из папки `changes`

## Структура директорий

```
/data/uploads/
  └── {username}/
      ├── source/      # Исходные файлы
      │   └── *.docx
      └── changes/     # Файлы с инструкциями
          └── *.docx
```

