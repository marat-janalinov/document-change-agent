# ðŸ‘¥ Ð£Ñ‡ÐµÑ‚Ð½Ñ‹Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Document Change Agent

## Ð¡Ð¾Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ

1. [ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ](#Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸-Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ)
2. [Ð£Ñ‡ÐµÑ‚Ð½Ñ‹Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸ PostgreSQL](#ÑƒÑ‡ÐµÑ‚Ð½Ñ‹Ðµ-Ð·Ð°Ð¿Ð¸ÑÐ¸-postgresql)
3. [ÐšÐ°Ðº ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹](#ÐºÐ°Ðº-ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ-Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹)
4. [ÐšÐ°Ðº Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¿Ð°Ñ€Ð¾Ð»Ð¸](#ÐºÐ°Ðº-Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ-Ð¿Ð°Ñ€Ð¾Ð»Ð¸)

---

## ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

### 1. ÐÐ´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ

**Ð¡Ð¾Ð·Ð´Ð°ÐµÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸** Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¹ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ….

| ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ | Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ |
|----------|----------|
| **Ð›Ð¾Ð³Ð¸Ð½** | `admin` |
| **Email** | `admin@example.com` |
| **ÐŸÐ°Ñ€Ð¾Ð»ÑŒ** | `admin123` |
| **Ð Ð¾Ð»ÑŒ** | `admin` |
| **Ð¡Ñ‚Ð°Ñ‚ÑƒÑ** | `active` |

**ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ:** Ð¡Ð¾Ð·Ð´Ð°ÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð² Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð½ÐµÑ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.

---

### 2. Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸

Ð¡Ð¾Ð·Ð´Ð°ÑŽÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· ÑÐºÑ€Ð¸Ð¿Ñ‚ `backend/create_users.py`.

#### ÐÐ´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ñ‹ (3 Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ)

| â„– | Ð›Ð¾Ð³Ð¸Ð½ | Email | ÐŸÐ°Ñ€Ð¾Ð»ÑŒ | Ð Ð¾Ð»ÑŒ | Ð¡Ñ‚Ð°Ñ‚ÑƒÑ |
|---|-------|-------|--------|------|--------|
| 1 | `admin1` | `admin1@example.com` | `admin123` | `admin` | `active` |
| 2 | `admin2` | `admin2@example.com` | `admin123` | `admin` | `active` |
| 3 | `admin3` | `admin3@example.com` | `admin123` | `admin` | `active` |

#### ÐžÐ¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ñ‹/Ð˜ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»Ð¸ (3 Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ)

| â„– | Ð›Ð¾Ð³Ð¸Ð½ | Email | ÐŸÐ°Ñ€Ð¾Ð»ÑŒ | Ð Ð¾Ð»ÑŒ | Ð¡Ñ‚Ð°Ñ‚ÑƒÑ |
|---|-------|-------|--------|------|--------|
| 1 | `operator1` | `operator1@example.com` | `operator123` | `executive` | `active` |
| 2 | `operator2` | `operator2@example.com` | `operator123` | `executive` | `active` |
| 3 | `operator3` | `operator3@example.com` | `operator123` | `executive` | `active` |

#### ÐžÐ¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ñ‹ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸ (3 Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ)

| â„– | Ð›Ð¾Ð³Ð¸Ð½ | Email | ÐŸÐ°Ñ€Ð¾Ð»ÑŒ | Ð Ð¾Ð»ÑŒ | Ð¡Ñ‚Ð°Ñ‚ÑƒÑ |
|---|-------|-------|--------|------|--------|
| 1 | `security1` | `security1@example.com` | `security123` | `security` | `active` |
| 2 | `security2` | `security2@example.com` | `security123` | `security` | `active` |
| 3 | `security3` | `security3@example.com` | `security123` | `security` | `active` |

---

### Ð˜Ñ‚Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ:

- **Ð’ÑÐµÐ³Ð¾:** 10 ÑƒÑ‡ÐµÑ‚Ð½Ñ‹Ñ… Ð·Ð°Ð¿Ð¸ÑÐµÐ¹
  - **4 Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°** (admin + admin1-3)
  - **3 Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ð°** (operator1-3)
  - **3 Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€Ð° Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸** (security1-3)

---

## Ð£Ñ‡ÐµÑ‚Ð½Ñ‹Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸ PostgreSQL

### ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ðº Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…

ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ (Ð¸Ð· `docker-compose.yml`):

| ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ | Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ |
|----------|----------------------|----------|
| **Ð¥Ð¾ÑÑ‚** | `postgres` (Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Docker) Ð¸Ð»Ð¸ `localhost` (ÑÐ½Ð°Ñ€ÑƒÐ¶Ð¸) | Ð˜Ð¼Ñ ÑÐµÑ€Ð²Ð¸ÑÐ° PostgreSQL |
| **ÐŸÐ¾Ñ€Ñ‚** | `5432` | Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ Ð¿Ð¾Ñ€Ñ‚ PostgreSQL |
| **Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…** | `document_agent` | Ð˜Ð¼Ñ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… |
| **ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ** | `postgres` | Ð˜Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð‘Ð” |
| **ÐŸÐ°Ñ€Ð¾Ð»ÑŒ** | `postgres123` | ÐŸÐ°Ñ€Ð¾Ð»ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð‘Ð” |

### Ð¡Ñ‚Ñ€Ð¾ÐºÐ° Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ (Connection String)

**Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚:**
```
postgresql://{user}:{password}@{host}:{port}/{database}
```

**ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ:**
```
postgresql://postgres:postgres123@postgres:5432/document_agent
```

**Ð”Ð»Ñ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ñ Ñ…Ð¾ÑÑ‚Ð° (Ð²Ð½Ðµ Docker):**
```
postgresql://postgres:postgres123@localhost:5432/document_agent
```

### ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ñ‡ÐµÑ€ÐµÐ· Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

Ð’ Ñ„Ð°Ð¹Ð»Ðµ `.env` Ð¸Ð»Ð¸ `docker-compose.yml`:

```bash
# PostgreSQL Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸
POSTGRES_DB=document_agent
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres123

# Ð¡Ñ‚Ñ€Ð¾ÐºÐ° Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ (Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð² backend)
DATABASE_URL=postgresql://postgres:postgres123@postgres:5432/document_agent
```

---

## ÐšÐ°Ðº ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹

### ÐœÐµÑ‚Ð¾Ð´ 1: ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ (Ð¿Ñ€Ð¸ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð‘Ð”)

ÐÐ´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€ `admin` ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€Ð²Ð¾Ð¼ Ð·Ð°Ð¿ÑƒÑÐºÐµ backend, ÐµÑÐ»Ð¸ Ð² Ð±Ð°Ð·Ðµ Ð½ÐµÑ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.

### ÐœÐµÑ‚Ð¾Ð´ 2: Ð§ÐµÑ€ÐµÐ· ÑÐºÑ€Ð¸Ð¿Ñ‚ create_users.py

```bash
# Ð’Ñ…Ð¾Ð´ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ backend
docker compose exec backend bash

# Ð—Ð°Ð¿ÑƒÑÐº ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
cd /app
python create_users.py
```

Ð˜Ð»Ð¸ Ñ Ñ…Ð¾ÑÑ‚Ð°:

```bash
# Ð—Ð°Ð¿ÑƒÑÐº ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° Ñ‡ÐµÑ€ÐµÐ· Docker
docker compose exec backend python create_users.py
```

### ÐœÐµÑ‚Ð¾Ð´ 3: Ð§ÐµÑ€ÐµÐ· API (Ð´Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð²)

ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ…Ð¾Ð´Ð° ÐºÐ°Ðº Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€, Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ñ‡ÐµÑ€ÐµÐ· Ð²ÐµÐ±-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð² Ñ€Ð°Ð·Ð´ÐµÐ»Ðµ "ÐÐ´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ" â†’ "ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸".

---

## ÐšÐ°Ðº Ð¸Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¿Ð°Ñ€Ð¾Ð»Ð¸

### Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ð¿Ð°Ñ€Ð¾Ð»Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

#### Ð§ÐµÑ€ÐµÐ· API:

```bash
# Ð’Ñ…Ð¾Ð´ ÐºÐ°Ðº Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "admin", "password": "admin123"}'

# ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ñ‚Ð¾ÐºÐµÐ½Ð° Ð¸Ð· Ð¾Ñ‚Ð²ÐµÑ‚Ð°, Ð·Ð°Ñ‚ÐµÐ¼:
curl -X PUT http://localhost:8000/api/users/{user_id} \
  -H "Authorization: Bearer {token}" \
  -H "Content-Type: application/json" \
  -d '{"password": "new_password"}'
```

#### Ð§ÐµÑ€ÐµÐ· Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ…:

```bash
# Ð’Ñ…Ð¾Ð´ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ PostgreSQL
docker compose exec postgres psql -U postgres -d document_agent

# Ð’ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ PostgreSQL:
# ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð°Ñ€Ð¾Ð»Ñ (Ð½ÑƒÐ¶Ð½Ð¾ Ð·Ð°Ñ…ÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· bcrypt)
UPDATE users SET hashed_password = 'Ð½Ð¾Ð²Ñ‹Ð¹_Ñ…ÐµÑˆ' WHERE username = 'admin';
```

### Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ð¿Ð°Ñ€Ð¾Ð»Ñ PostgreSQL

#### ÐœÐµÑ‚Ð¾Ð´ 1: Ð§ÐµÑ€ÐµÐ· Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ

1. Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð² `.env`:
```bash
POSTGRES_PASSWORD=Ð½Ð¾Ð²Ñ‹Ð¹_Ð½Ð°Ð´ÐµÐ¶Ð½Ñ‹Ð¹_Ð¿Ð°Ñ€Ð¾Ð»ÑŒ
```

2. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ `DATABASE_URL`:
```bash
DATABASE_URL=postgresql://postgres:Ð½Ð¾Ð²Ñ‹Ð¹_Ð½Ð°Ð´ÐµÐ¶Ð½Ñ‹Ð¹_Ð¿Ð°Ñ€Ð¾Ð»ÑŒ@postgres:5432/document_agent
```

3. ÐŸÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€:
```bash
docker compose down
docker compose up -d postgres
```

#### ÐœÐµÑ‚Ð¾Ð´ 2: Ð§ÐµÑ€ÐµÐ· SQL

```bash
# Ð’Ñ…Ð¾Ð´ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ PostgreSQL
docker compose exec postgres psql -U postgres -d document_agent

# Ð’ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ PostgreSQL:
ALTER USER postgres WITH PASSWORD 'Ð½Ð¾Ð²Ñ‹Ð¹_Ð½Ð°Ð´ÐµÐ¶Ð½Ñ‹Ð¹_Ð¿Ð°Ñ€Ð¾Ð»ÑŒ';
```

---

## Ð Ð¾Ð»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹

### admin (ÐÐ´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€)

**ÐŸÑ€Ð°Ð²Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°:**
- âœ… ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿ ÐºÐ¾ Ð²ÑÐµÐ¼ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑÐ¼
- âœ… Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼Ð¸
- âœ… Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚Ð°Ð¼Ð¸
- âœ… ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð²ÑÐµÑ… Ð»Ð¾Ð³Ð¾Ð² Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹
- âœ… Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ð¼Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ð¼Ð¸

### executive (ÐžÐ¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€/Ð˜ÑÐ¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒ)

**ÐŸÑ€Ð°Ð²Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°:**
- âœ… ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ðº Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ð¼
- âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¹
- âœ… Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐ²Ð¾Ð¸Ð¼Ð¸ Ñ„Ð°Ð¹Ð»Ð°Ð¼Ð¸
- âœ… ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ ÑÐ²Ð¾Ð¸Ñ… Ð»Ð¾Ð³Ð¾Ð² Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹
- âŒ Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼Ð¸
- âŒ Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚Ð°Ð¼Ð¸

### security (ÐžÐ¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸)

**ÐŸÑ€Ð°Ð²Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°:**
- âœ… ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð²ÑÐµÑ… Ð»Ð¾Ð³Ð¾Ð² Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹
- âœ… ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð¾Ñ‚Ñ‡ÐµÑ‚Ð¾Ð² Ð¾ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ðµ
- âœ… ÐÑƒÐ´Ð¸Ñ‚ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸
- âŒ Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼Ð¸
- âŒ Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð¼Ð¿Ñ‚Ð°Ð¼Ð¸
- âŒ ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ðº Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ð¼

---

## Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ

### âš ï¸ Ð’Ð°Ð¶Ð½Ñ‹Ðµ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸:

1. **Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»Ð¸ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ** Ð¿ÐµÑ€ÐµÐ´ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð² production
2. **Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð½Ð°Ð´ÐµÐ¶Ð½Ñ‹Ðµ Ð¿Ð°Ñ€Ð¾Ð»Ð¸:**
   - ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 12 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²
   - ÐšÐ¾Ð¼Ð±Ð¸Ð½Ð°Ñ†Ð¸Ñ Ð±ÑƒÐºÐ², Ñ†Ð¸Ñ„Ñ€ Ð¸ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ñ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²
   - ÐÐµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÐ»Ð¾Ð²Ð°Ñ€Ð½Ñ‹Ðµ ÑÐ»Ð¾Ð²Ð°
3. **ÐÐµ Ñ…Ñ€Ð°Ð½Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»Ð¸ Ð² Git:**
   - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ `.env` Ñ„Ð°Ð¹Ð» (Ð² `.gitignore`)
   - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÐµÐºÑ€ÐµÑ‚Ñ‹ Ð² CI/CD ÑÐ¸ÑÑ‚ÐµÐ¼Ð°Ñ…
4. **Ð ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐ¹Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»Ð¸:**
   - Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ Ð¼ÐµÐ½ÑÑ‚ÑŒ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 90 Ð´Ð½ÐµÐ¹
5. **ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÑŒÑ‚Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…:**
   - Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ firewall
   - ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÑŒÑ‚Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ñ… IP

---

## ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…

### Ð˜Ð· ÐºÐ¾Ð¼Ð°Ð½Ð´Ð½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸

```bash
# Ð’Ñ…Ð¾Ð´ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ PostgreSQL
docker compose exec postgres psql -U postgres -d document_agent

# Ð˜Ð»Ð¸ Ñ ÑƒÐºÐ°Ð·Ð°Ð½Ð¸ÐµÐ¼ Ð¿Ð°Ñ€Ð¾Ð»Ñ
docker compose exec postgres psql -U postgres -d document_agent -W
# Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ: postgres123
```

### Ð˜Ð· Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ (Python)

```python
from sqlalchemy import create_engine
from database import SessionLocal, User

# ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ
db = SessionLocal()

# ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
users = db.query(User).all()
for user in users:
    print(f"{user.username} ({user.role}): {user.email}")

db.close()
```

### Ð§ÐµÑ€ÐµÐ· Ð²Ð½ÐµÑˆÐ½Ð¸Ð¹ ÐºÐ»Ð¸ÐµÐ½Ñ‚ (pgAdmin, DBeaver, etc.)

**ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ:**
- **Host:** `localhost` (Ð¸Ð»Ð¸ IP ÑÐµÑ€Ð²ÐµÑ€Ð°)
- **Port:** `5432`
- **Database:** `document_agent`
- **Username:** `postgres`
- **Password:** `postgres123`

**Ð”Ð»Ñ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ð¸Ð· Docker ÑÐµÑ‚Ð¸:**
- **Host:** `postgres` (Ð¸Ð¼Ñ ÑÐµÑ€Ð²Ð¸ÑÐ°)
- **Port:** `5432`

---

## ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð² Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…

### SQL Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹

```sql
-- ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð²ÑÐµÑ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
SELECT id, username, email, role, status, created_at 
FROM users 
ORDER BY created_at;

-- ÐŸÐ¾Ð´ÑÑ‡ÐµÑ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð¿Ð¾ Ñ€Ð¾Ð»ÑÐ¼
SELECT role, COUNT(*) as count 
FROM users 
GROUP BY role;

-- ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
SELECT * FROM users WHERE username = 'admin';

-- ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
SELECT username, status FROM users WHERE status = 'active';
```

### Ð§ÐµÑ€ÐµÐ· Python ÑÐºÑ€Ð¸Ð¿Ñ‚

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
cat > list_users.py << 'EOF'
from database import SessionLocal, User

db = SessionLocal()
users = db.query(User).all()

print("\n=== Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð²ÑÐµÑ… Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ ===\n")
print(f"{'ID':<5} {'Ð›Ð¾Ð³Ð¸Ð½':<15} {'Email':<30} {'Ð Ð¾Ð»ÑŒ':<12} {'Ð¡Ñ‚Ð°Ñ‚ÑƒÑ':<10}")
print("-" * 75)

for user in users:
    print(f"{user.id:<5} {user.username:<15} {user.email:<30} {user.role:<12} {user.status:<10}")

print(f"\nÐ’ÑÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹: {len(users)}")
db.close()
EOF

# Ð—Ð°Ð¿ÑƒÑÐº
docker compose exec backend python list_users.py
```

---

## Ð¡Ð±Ñ€Ð¾Ñ Ð¿Ð°Ñ€Ð¾Ð»Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°

Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ð·Ð°Ð±Ñ‹Ð»Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°:

```bash
# Ð’Ñ…Ð¾Ð´ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ PostgreSQL
docker compose exec postgres psql -U postgres -d document_agent

# Ð’ ÐºÐ¾Ð½ÑÐ¾Ð»Ð¸ PostgreSQL ÑÐ¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ Ñ…ÐµÑˆ Ð¿Ð°Ñ€Ð¾Ð»Ñ Ñ‡ÐµÑ€ÐµÐ· Python:
# (Ð’Ñ‹Ð¹Ð´Ð¸Ñ‚Ðµ Ð¸Ð· psql Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ðµ backend)
docker compose exec backend python -c "
import bcrypt
password = 'new_admin_password'.encode('utf-8')
salt = bcrypt.gensalt()
hashed = bcrypt.hashpw(password, salt)
print(hashed.decode('utf-8'))
"

# Ð—Ð°Ñ‚ÐµÐ¼ Ð² psql Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ:
UPDATE users 
SET hashed_password = 'Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð½Ñ‹Ð¹_Ñ…ÐµÑˆ' 
WHERE username = 'admin';
```

---

## Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ ÑÐ¿Ð¸ÑÐºÐ° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹

### Ð’ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ CSV

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð°
cat > export_users.py << 'EOF'
import csv
from database import SessionLocal, User

db = SessionLocal()
users = db.query(User).all()

with open('users_export.csv', 'w', newline='', encoding='utf-8') as f:
    writer = csv.writer(f)
    writer.writerow(['ID', 'Ð›Ð¾Ð³Ð¸Ð½', 'Email', 'Ð Ð¾Ð»ÑŒ', 'Ð¡Ñ‚Ð°Ñ‚ÑƒÑ', 'Ð¡Ð¾Ð·Ð´Ð°Ð½'])
    
    for user in users:
        writer.writerow([
            user.id,
            user.username,
            user.email,
            user.role,
            user.status,
            user.created_at.isoformat() if user.created_at else ''
        ])

print(f"Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾ {len(users)} Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð² users_export.csv")
db.close()
EOF

# Ð—Ð°Ð¿ÑƒÑÐº
docker compose exec backend python export_users.py
docker compose cp backend:/app/users_export.csv ./users_export.csv
```

---

## Ð ÐµÐ·ÑŽÐ¼Ðµ Ð²ÑÐµÑ… ÑƒÑ‡ÐµÑ‚Ð½Ñ‹Ñ… Ð·Ð°Ð¿Ð¸ÑÐµÐ¹

### ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ (10)

| Ð Ð¾Ð»ÑŒ | ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ | Ð›Ð¾Ð³Ð¸Ð½Ñ‹ |
|------|------------|--------|
| **admin** | 4 | admin, admin1, admin2, admin3 |
| **executive** | 3 | operator1, operator2, operator3 |
| **security** | 3 | security1, security2, security3 |

### Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… PostgreSQL (1)

| ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ | Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ |
|----------|----------|
| **ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð‘Ð”** | postgres |
| **ÐŸÐ°Ñ€Ð¾Ð»ÑŒ Ð‘Ð”** | postgres123 |
| **Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…** | document_agent |
| **Ð¥Ð¾ÑÑ‚ (Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Docker)** | postgres |
| **ÐŸÐ¾Ñ€Ñ‚** | 5432 |

---

**Ð’ÐµÑ€ÑÐ¸Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°:** 1.0  
**Ð”Ð°Ñ‚Ð° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ:** 2025-11-24

---

*âš ï¸ Ð’ÐÐ–ÐÐž: Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð²ÑÐµ Ð¿Ð°Ñ€Ð¾Ð»Ð¸ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Ð¿ÐµÑ€ÐµÐ´ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÐµÐ¼ Ð² production!*

